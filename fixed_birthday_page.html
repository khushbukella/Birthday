<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Birthday, Mom!</title>
  <style>
    /* CSS styles remain unchanged for brevity */
  </style>
</head>
<body>
  <!-- Sparkles, Balloons, Terminal, Modals, Gujarati Wish -->
  <!-- ...Your existing HTML layout... -->

  <audio id="birthdaySong" src="birthday_song.mp3"></audio>
  <canvas id="confetti-canvas" style="position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none;"></canvas>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const typingText = document.getElementById("typing-text");
      if (typingText) {
        typingText.style.width = "0";
        setTimeout(() => {
          typingText.style.width = "100%";
        }, 100);
      }
    });

    function triggerConfetti() {
      if (typeof confetti !== 'undefined') {
        confetti.create(document.getElementById('confetti-canvas'), {
          resize: true
        })({
          particleCount: 150,
          spread: 140,
          origin: { y: 0.6 },
          colors: ['#00ff88', '#ff4081', '#3f51b5', '#ff8c00', '#adff2f']
        });
      }
    }

    function startAsciiAnimation() {
      const container = document.getElementById("ascii-container");
      const wishElement = document.getElementById("birthday-wish");
      const letterElement = document.getElementById("letter-section");
      const asciiLines = [
        "██╗ ██╗ █████╗ ██████╗ ██████╗ ██╗ ██╗",
        "██║ ██║██╔══██╗██╔══██╗██╔══██╗╚██╗ ██╔╝",
        "███████║███████║██████╔╝██████╔╝ ╚████╔╝ ",
        "██╔══██║██╔══██║██╔═══╝ ██╔═══╝ ╚██╔╝ ",
        "██║ ██║██║ ██║██║ ██║ ██║ ",
        "╚═╝ ╚═╝╚═╝ ╚═╝╚═╝ ╚═╝ ╚═╝ ",
        "",
        "██████╗ ██╗██████╗ ████████╗██╗ ██╗██████╗ █████╗ ██╗ ██╗",
        "██╔══██╗██║██╔══██╗╚══██╔══╝██║ ██║██╔══██╗██╔══██╗╚██╗ ██╔╝",
        "██████╔╝██║██████╔╝ ██║ ███████║██║ ██║███████║ ╚████╔╝ ",
        "██╔══██╗██║██╔══██╗ ██║ ██╔══██║██║ ██║██╔══██║ ╚██╔╝ ",
        "██████╔╝██║██║ ██║ ██║ ██║ ██║██████╔╝██║ ██║ ██║ ",
        "╚═════╝ ╚═╝╚═╝ ╚═╝ ╚═╝ ╚═╝ ╚═╝╚═════╝ ╚═╝ ╚═╝ ╚═╝ ",
        "",
        "███╗ ███╗██╗ ██╗███╗ ███╗███╗ ███╗██╗ ██╗",
        "████╗ ████║██║ ██║████╗ ████║████╗ ████║╚██╗ ██╔╝",
        "██╔████╔██║██║ ██║██╔████╔██║██╔████╔██║ ╚████╔╝ ",
        "██║╚██╔╝██║██║ ██║██║╚██╔╝██║██║╚██╔╝██║ ╚██╔╝ ",
        "██║ ╚═╝ ██║╚██████╔╝██║ ╚═╝ ██║██║ ╚═╝ ██║ ██║ ",
        "╚═╝ ╚═╝ ╚═════╝ ╚═╝ ╚═╝╚═╝ ╚═╝ ╚═╝ "
      ];
      let currentLine = 0;
      let currentChar = 0;
      container.innerHTML = "";

      function typeNextChar() {
        if (currentLine < asciiLines.length) {
          const line = asciiLines[currentLine];
          if (currentChar < line.length) {
            const lines = container.innerHTML.split('\n');
            if (lines.length <= currentLine) {
              lines.push('');
            }
            lines[currentLine] = line.substring(0, currentChar + 1);
            container.innerHTML = lines.join('\n');
            currentChar++;
            setTimeout(typeNextChar, 20);
          } else {
            currentLine++;
            currentChar = 0;
            container.innerHTML += '\n';
            setTimeout(typeNextChar, 100);
          }
        } else {
          wishElement.style.opacity = "1";
          container.style.textShadow = "0 0 10px #00ff88, 0 0 20px #00ff88";
          setTimeout(() => {
            letterElement.style.opacity = "1";
          }, 1500);
          setTimeout(() => {
            triggerConfetti();
            triggerConfetti();
          }, 500);
        }
      }
      typeNextChar();
    }
  </script>
</body>
</html>